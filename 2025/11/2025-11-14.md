# 2025-11-14 TIL

# âœ… ì˜¤ëŠ˜ í•œ ì¼
- ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ë§ ì‹¤ìŠµ ì§„í–‰
- Recipeì™€ Ingredient ëª¨ë¸ ê°„ ë‹¤ëŒ€ë‹¤(M:N) ê´€ê³„ êµ¬í˜„
- ManyToManyFieldë¥¼ í™œìš©í•œ ë ˆì‹œí”¼ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•
- Django Adminê³¼ ModelFormì„ ì´ìš©í•œ ë°ì´í„° ìƒì„± ë° ê´€ë¦¬

# ğŸ“š ë°°ìš´ ì 
- ë°ì´í„°ë² ì´ìŠ¤ ì •ê·œí™”ì˜ í•„ìš”ì„±ê³¼ ì œ1ì •ê·œí™” ê°œë…ì„ ì´í•´í•¨
- Djangoì˜ ManyToManyFieldê°€ ìë™ìœ¼ë¡œ ì¤‘ê°œ í…Œì´ë¸”ì„ ìƒì„±í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë¨
- ModelMultipleChoiceFieldë¥¼ ì‚¬ìš©í•˜ë©´ ê´€ë ¨ ëª¨ë¸ì˜ ë°ì´í„°ë¥¼ ì§ì ‘ ì„ íƒì§€ë¡œ í™œìš©í•  ìˆ˜ ìˆìŒ
- M:N ê´€ê³„ì—ì„œ MTM í•„ë“œë¥¼ ì–´ëŠ ëª¨ë¸ì— ì •ì˜í•˜ëŠëƒì— ë”°ë¼ ë°ì´í„° ì €ì¥ ë°©ì‹ì´ ë‹¬ë¼ì§
- queryset ì†ì„±ìœ¼ë¡œ ì„ íƒì§€ë¥¼ ë™ì ìœ¼ë¡œ í•„í„°ë§í•  ìˆ˜ ìˆìŒ

# ğŸ“Œ í•µì‹¬ ê°œë…
- **ì œ1ì •ê·œí™”**: ê° ì»¬ëŸ¼ì´ ì›ì ê°’(Atomic Value)ë§Œ ê°€ì ¸ì•¼ í•¨. ì½¤ë§ˆë¡œ êµ¬ë¶„ëœ ë¬¸ìì—´ ëŒ€ì‹  ë³„ë„ í…Œì´ë¸”ë¡œ ë¶„ë¦¬
- **ManyToManyField**: Djangoì—ì„œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ êµ¬í˜„í•˜ëŠ” í•„ë“œ. ìë™ìœ¼ë¡œ ì¤‘ê°œ í…Œì´ë¸” ìƒì„±
- **ModelMultipleChoiceField**: Formì—ì„œ ëª¨ë¸ì˜ ì—¬ëŸ¬ ë ˆì½”ë“œë¥¼ ì„ íƒí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” í•„ë“œ. querysetìœ¼ë¡œ ì„ íƒì§€ ê´€ë¦¬
- **related_name**: ì—­ì°¸ì¡° ì‹œ ì‚¬ìš©í•  ì´ë¦„ ì§€ì • (ì˜ˆ: ingredient.recipes.all())
- **MTM ì£¼ì²´**: ManyToManyFieldë¥¼ ì •ì˜í•œ ëª¨ë¸ì´ ì£¼ì²´ê°€ ë˜ì–´ ìë™ ì €ì¥ ì²˜ë¦¬ë¨

# ğŸ’¡ ì˜ˆì‹œ ì½”ë“œ

```python
# foods/models.py

# ì‹ì¬ë£Œ ëª¨ë¸
class Ingredient(models.Model):
    name = models.CharField(max_length=100)
    
    def __str__(self):
        return self.name

# ë ˆì‹œí”¼ ëª¨ë¸ (ManyToManyFieldì˜ ì£¼ì²´)
class Recipe(models.Model):
    name = models.CharField(max_length=200)
    description = models.TextField()
    ingredients = models.ManyToManyField(
        Ingredient,
        related_name='recipes',
    )
    
    def __str__(self):
        return self.name
```

```python
# foods/forms.py

class RecipeForm(forms.ModelForm):
    ingredients = forms.ModelMultipleChoiceField(
        queryset=Ingredient.objects.all(),
        widget=forms.CheckboxSelectMultiple,
        required=False
    )
    
    class Meta:
        model = Recipe
        fields = ['name', 'description', 'ingredients']
```

```html
<!-- foods/index.html -->
<!-- ì—­ì°¸ì¡°ë¥¼ í†µí•œ ì‹ì¬ë£Œ ëª©ë¡ í‘œì‹œ -->
<ul>
  {% for ingredient in recipe.ingredients.all %}
    <li>{{ ingredient.name }}</li>
  {% endfor %}
</ul>
```

```python
# queryset í•„í„°ë§ ì˜ˆì‹œ
def get_filtered_ingredients():
    return Ingredient.objects.exclude(name__contains='ë§¤ìš´').filter(
        Q(name__startswith='A') | Q(name__endswith='B')
    )
```

# ğŸ› ï¸ ì´ìŠˆ & í•´ê²°
| ğŸ ë¬¸ì œ ìƒí™© | ğŸ” ì›ì¸ | ğŸ’¡ í•´ê²° ë°©ë²• |
|--------------|--------|--------------|
| ë ˆì‹œí”¼ì— ì—¬ëŸ¬ ì¬ë£Œë¥¼ ì €ì¥í•  ë•Œ ì½¤ë§ˆë¡œ êµ¬ë¶„ëœ ë¬¸ìì—´ë¡œ ì €ì¥í•˜ë©´ ë°ì´í„° ê´€ë¦¬ê°€ ì–´ë ¤ì›€ | ì œ1ì •ê·œí™”ê°€ ë˜ì§€ ì•Šì€ ë¹„ì›ìì  ê°’ ì €ì¥ | Ingredient í…Œì´ë¸”ì„ ë³„ë„ë¡œ ë¶„ë¦¬í•˜ê³  ManyToManyFieldë¡œ ê´€ê³„ ì„¤ì • |
| ManyToManyFieldë¥¼ Ingredient ëª¨ë¸ì— ì •ì˜í•˜ë©´ form.save() ì‹œ ìë™ ì €ì¥ì´ ì•ˆ ë¨ | Recipe ëª¨ë¸ì´ ingredients í•„ë“œë¥¼ ì§ì ‘ ê°€ì§€ì§€ ì•Šì•„ ModelFormì´ ì¸ì‹ ëª»í•¨ | Recipe ëª¨ë¸ì— ManyToManyFieldë¥¼ ì •ì˜í•˜ì—¬ ì£¼ì²´ë¥¼ Recipeë¡œ ì„¤ì • |