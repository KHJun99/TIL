# 2025-11-11 TIL

# âœ… ì˜¤ëŠ˜ í•œ ì¼
- Djangoì—ì„œ ìœ ì € ê°„ íŒ”ë¡œìš° ê¸°ëŠ¥ì„ ìœ„í•œ N:M ëª¨ë¸ ê´€ê³„ ì„¤ê³„ ë° êµ¬í˜„
- í”„ë¡œí•„ í˜ì´ì§€ êµ¬í˜„ (URL, View, Template)
- ìê¸° ìì‹ ì„ ì°¸ì¡°í•˜ëŠ” ManyToManyField('self') ì‚¬ìš©ë²• í•™ìŠµ
- symmetrical ì†ì„±ì„ Falseë¡œ ì„¤ì •í•˜ì—¬ ë‹¨ë°©í–¥ íŒ”ë¡œìš° êµ¬í˜„
- Fixtures(dumpdata/loaddata)ë¥¼ í™œìš©í•œ ë°ì´í„° ì…ì¶œë ¥ íš¨ìœ¨í™”
- íŒ”ë¡œì‰/íŒ”ë¡œì›Œ ìˆ˜ í‘œì‹œ ë° íŒ”ë¡œìš°/ì–¸íŒ”ë¡œìš° ë²„íŠ¼ êµ¬í˜„
- ì¤‘ê°œ í…Œì´ë¸”(accounts_user_followings) í™•ì¸ ë° ë™ì‘ ì›ë¦¬ ì´í•´
- í˜‘ì—… ì‹œ ë™ì¼í•œ ë°ì´í„° í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•œ Fixtures í™œìš© ë°©ë²• í•™ìŠµ

# ğŸ“š ë°°ìš´ ì 
- **ìê¸° ìì‹  ì°¸ì¡°(self)**: User ëª¨ë¸ì´ ìê¸° ìì‹ ê³¼ M:N ê´€ê³„ë¥¼ ë§ºì„ ë•Œ `ManyToManyField('self')` ì‚¬ìš©
- **symmetrical ì†ì„±ì˜ ì¤‘ìš”ì„±**: íŒ”ë¡œìš°ëŠ” ë‹¨ë°©í–¥ì´ë¯€ë¡œ `symmetrical=False` í•„ìˆ˜ (ì¹œêµ¬ ê´€ê³„ëŠ” True, íŒ”ë¡œìš°ëŠ” False)
- **related_nameì˜ ì—­í• **: `followers`ë¡œ ëª…ì‹œí•˜ì—¬ ì—­ì°¸ì¡° ë§¤ë‹ˆì €ë¥¼ ëª…í™•í•˜ê²Œ êµ¬ë¶„
- **í”„ë¡œí•„ í˜ì´ì§€ ì ‘ê·¼ì„±**: ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì‚¬ëŒì˜ í”„ë¡œí•„ë„ ë°©ë¬¸ ê°€ëŠ¥í•˜ë„ë¡ usernameì„ variable routingìœ¼ë¡œ ì „ë‹¬
- **ì¤‘ê°œ í…Œì´ë¸” êµ¬ì¡°**: `from_user_id`(íŒ”ë¡œìš°í•˜ëŠ” ì‚¬ëŒ)ì™€ `to_user_id`(íŒ”ë¡œìš°ë˜ëŠ” ì‚¬ëŒ) í•„ë“œë¡œ ê´€ê³„ ì €ì¥
- **Fixturesì˜ í•„ìš”ì„±**: `.gitignore`ë¡œ ì¸í•´ DBëŠ” ì›ê²© ì €ì¥ì†Œì— ì—…ë¡œë“œë˜ì§€ ì•Šìœ¼ë¯€ë¡œ í˜‘ì—… ì‹œ ë™ì¼í•œ ì´ˆê¸° ë°ì´í„° í•„ìš”
- **dumpdata ëª…ë ¹ì–´**: íŠ¹ì • ëª¨ë¸ì˜ ë°ì´í„°ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ íŒŒì¼ë¡œ ì €ì¥
- **loaddata ìˆœì„œì˜ ì¤‘ìš”ì„±**: ëª¨ë¸ ê°„ ì˜ì¡´ ê´€ê³„ ê³ ë ¤ (User â†’ Article â†’ Comment ìˆœì„œ)
- **Fixtures ê¸°ë³¸ ê²½ë¡œ**: `app_name/fixtures/` ë””ë ‰í† ë¦¬ì— JSON íŒŒì¼ ìœ„ì¹˜
- **ì¸ì½”ë”© ë¬¸ì œ ë°©ì§€**: `--indent 4` ì˜µì…˜ìœ¼ë¡œ ê°€ë…ì„± ìˆëŠ” JSON íŒŒì¼ ìƒì„±

# ğŸ“Œ í•µì‹¬ ê°œë…
- **ìê¸° ìì‹  ì°¸ì¡°(self)**: ê°™ì€ ëª¨ë¸ ê°„ M:N ê´€ê³„ ì„¤ì • ì‹œ ì‚¬ìš©, `ManyToManyField('self')`
- **symmetrical ì†ì„±**: ê´€ê³„ì˜ ë°©í–¥ì„± ì„¤ì • (True: ëŒ€ì¹­/ì–‘ë°©í–¥, False: ë¹„ëŒ€ì¹­/ë‹¨ë°©í–¥)
- **related_name**: ì—­ì°¸ì¡° ë§¤ë‹ˆì € ì´ë¦„ ì§€ì •, ì¶©ëŒ ë°©ì§€ ë° ëª…í™•í•œ ì˜ë¯¸ ë¶€ì—¬
- **íŒ”ë¡œìš° ê´€ê³„**: User(M) - User(N), í•œ ìœ ì €ê°€ ì—¬ëŸ¬ ìœ ì €ë¥¼ íŒ”ë¡œìš°, ì—¬ëŸ¬ ìœ ì €ì—ê²Œ íŒ”ë¡œìš°ë¨
- **ì¤‘ê°œ í…Œì´ë¸”**: `accounts_user_followings` (from_user_id, to_user_id)
- **Fixtures**: Djangoì˜ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ë° ê³µìœ ë¥¼ ìœ„í•œ íŒŒì¼ í˜•ì‹ (ì£¼ë¡œ JSON)
- **dumpdata**: ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ëŠ” ëª…ë ¹ì–´
- **loaddata**: Fixtures íŒŒì¼ì„ ì½ì–´ ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ëª…ë ¹ì–´
- **Fixtures ì‚¬ìš© ëª©ì **: â‘  ì´ˆê¸° ë°ì´í„° ì„¸íŒ…, â‘¡ í…ŒìŠ¤íŠ¸ ìƒ˜í”Œ ë°ì´í„° ì¤€ë¹„, â‘¢ í˜‘ì—… ì‹œ ë™ì¼í•œ ë°ì´í„° í™˜ê²½ êµ¬ì¶•
- **get_user_model()**: User ëª¨ë¸ì„ ì§ì ‘ importí•˜ì§€ ì•Šê³  ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ (models.py ì™¸ë¶€ì—ì„œ ì‚¬ìš©)

# ğŸ’¡ ì˜ˆì‹œ ì½”ë“œ

**íŒ”ë¡œìš° ëª¨ë¸ ê´€ê³„ ì„¤ì • - ìê¸° ìì‹  ì°¸ì¡°**
```python
# accounts/models.py
from django.contrib.auth.models import AbstractUser
from django.db import models

class User(AbstractUser):
    # ìê¸° ìì‹ ì„ ì°¸ì¡°í•˜ëŠ” M:N ê´€ê³„
    followings = models.ManyToManyField(
        'self',  # settings.AUTH_USER_MODEL ëŒ€ì‹  'self' ì‚¬ìš© ê°€ëŠ¥
        symmetrical=False,  # ë‹¨ë°©í–¥ ê´€ê³„ (íŒ”ë¡œìš°ëŠ” ë¹„ëŒ€ì¹­)
        related_name='followers'  # ì—­ì°¸ì¡° ì´ë¦„ ëª…ì‹œ
    )
    
    # symmetrical=Falseì˜ ì˜ë¯¸:
    # Aê°€ Bë¥¼ íŒ”ë¡œìš°í•´ë„ Bê°€ ìë™ìœ¼ë¡œ Aë¥¼ íŒ”ë¡œìš°í•˜ì§€ ì•ŠìŒ
    
# Migration í›„ ìƒì„±ë˜ëŠ” ì¤‘ê°œ í…Œì´ë¸”: accounts_user_followings
# í…Œì´ë¸” êµ¬ì¡°:
# - id (INTEGER, Primary Key)
# - from_user_id (bigint) - íŒ”ë¡œìš°í•˜ëŠ” ìœ ì € (ë‚˜)
# - to_user_id (bigint) - íŒ”ë¡œìš°ë˜ëŠ” ìœ ì € (ìƒëŒ€ë°©)
```

**symmetrical ì†ì„± ë¹„êµ**
```python
# symmetrical=True (ê¸°ë³¸ê°’) - ëŒ€ì¹­ ê´€ê³„
class User(AbstractUser):
    friends = models.ManyToManyField('self')
    # Aê°€ Bë¥¼ ì¹œêµ¬ ì¶”ê°€ â†’ Bë„ ìë™ìœ¼ë¡œ Aë¥¼ ì¹œêµ¬ë¡œ ì¶”ê°€
    # ì˜ˆ: í˜ì´ìŠ¤ë¶ ì¹œêµ¬ ê´€ê³„

# symmetrical=False - ë¹„ëŒ€ì¹­ ê´€ê³„
class User(AbstractUser):
    followings = models.ManyToManyField('self', symmetrical=False, related_name='followers')
    # Aê°€ Bë¥¼ íŒ”ë¡œìš° â†’ BëŠ” Aë¥¼ ìë™ìœ¼ë¡œ íŒ”ë¡œìš°í•˜ì§€ ì•ŠìŒ
    # ì˜ˆ: ì¸ìŠ¤íƒ€ê·¸ë¨ íŒ”ë¡œìš° ê´€ê³„
```

**í”„ë¡œí•„ í˜ì´ì§€ URL ì„¤ì •**
```python
# accounts/urls.py
from django.urls import path
from . import views

app_name = 'accounts'
urlpatterns = [
    path('login/', views.login, name='login'),
    path('logout/', views.logout, name='logout'),
    path('signup/', views.signup, name='signup'),
    path('delete/', views.delete, name='delete'),
    path('update/', views.update, name='update'),
    # usernameì„ variable routingìœ¼ë¡œ ì „ë‹¬
    path('profile/<str:username>/', views.profile, name='profile'),
    # user_pkë¥¼ variable routingìœ¼ë¡œ ì „ë‹¬
    path('<int:user_pk>/follow/', views.follow, name='follow'),
]
```

**í”„ë¡œí•„ í˜ì´ì§€ View í•¨ìˆ˜**
```python
# accounts/views.py
from django.shortcuts import render, redirect
from django.contrib.auth import get_user_model
from django.contrib.auth.decorators import login_required

def profile(request, username):
    # User ëª¨ë¸ì„ ì§ì ‘ importí•˜ì§€ ì•Šê³  get_user_model() ì‚¬ìš©
    User = get_user_model()
    person = User.objects.get(username=username)
    
    context = {
        'person': person,
    }
    return render(request, 'accounts/profile.html', context)
```

**í”„ë¡œí•„ í˜ì´ì§€ Template**
```html
<!-- accounts/profile.html -->
<h1>{{ person.username }}ë‹˜ì˜ í”„ë¡œí•„</h1>

<!-- íŒ”ë¡œì‰/íŒ”ë¡œì›Œ ìˆ˜ í‘œì‹œ -->
<div>
  <div>
    íŒ”ë¡œì‰: {{ person.followings.all|length }} / 
    íŒ”ë¡œì›Œ: {{ person.followers.all|length }}
  </div>
</div>

<!-- íŒ”ë¡œìš°/ì–¸íŒ”ë¡œìš° ë²„íŠ¼ (ë³¸ì¸ í˜ì´ì§€ì—ì„œëŠ” ìˆ¨ê¹€) -->
{% if request.user != person %}
  <div>
    <form action="{% url 'accounts:follow' person.pk %}" method="POST">
      {% csrf_token %}
      {% if request.user in person.followers.all %}
        <input type="submit" value="Unfollow">
      {% else %}
        <input type="submit" value="Follow">
      {% endif %}
    </form>
  </div>
{% endif %}

<hr>

<!-- ì‘ì„±í•œ ê²Œì‹œê¸€ -->
<h2>{{ person.username }}ê°€ ì‘ì„±í•œ ê²Œì‹œê¸€</h2>
{% for article in person.article_set.all %}
  <div>{{ article.title }}</div>
{% endfor %}

<hr>

<!-- ì‘ì„±í•œ ëŒ“ê¸€ -->
<h2>{{ person.username }}ê°€ ì‘ì„±í•œ ëŒ“ê¸€</h2>
{% for comment in person.comment_set.all %}
  <div>{{ comment.content }}</div>
{% endfor %}

<hr>

<!-- ì¢‹ì•„ìš”í•œ ê²Œì‹œê¸€ -->
<h2>{{ person.username }}ê°€ ì¢‹ì•„ìš”í•œ ê²Œì‹œê¸€</h2>
{% for article in person.like_articles.all %}
  <div>{{ article.title }}</div>
{% endfor %}
```

**íŒ”ë¡œìš° ê¸°ëŠ¥ View í•¨ìˆ˜**
```python
# accounts/views.py
from django.contrib.auth.decorators import login_required

@login_required
def follow(request, user_pk):
    User = get_user_model()
    person = User.objects.get(pk=user_pk)
    
    # ìê¸° ìì‹ ì€ íŒ”ë¡œìš°í•  ìˆ˜ ì—†ìŒ
    if person != request.user:
        # ì´ë¯¸ íŒ”ë¡œìš° ì¤‘ì´ë©´ ì–¸íŒ”ë¡œìš°
        if request.user in person.followers.all():
            person.followers.remove(request.user)
        # íŒ”ë¡œìš°í•˜ì§€ ì•Šì•˜ìœ¼ë©´ íŒ”ë¡œìš°
        else:
            person.followers.add(request.user)
    
    return redirect('accounts:profile', person.username)

# ë˜ëŠ” exists() ë©”ì„œë“œ ì‚¬ìš© (ì„±ëŠ¥ ê°œì„ )
@login_required
def follow(request, user_pk):
    User = get_user_model()
    person = User.objects.get(pk=user_pk)
    
    if person != request.user:
        # exists()ëŠ” QuerySetì„ í‰ê°€í•˜ì§€ ì•Šê³  ì¡´ì¬ ì—¬ë¶€ë§Œ í™•ì¸
        if person.followers.filter(pk=request.user.pk).exists():
            person.followers.remove(request.user)
        else:
            person.followers.add(request.user)
    
    return redirect('accounts:profile', person.username)
```

**index í˜ì´ì§€ì—ì„œ í”„ë¡œí•„ ë§í¬ ì¶”ê°€**
```html
<!-- articles/index.html -->
<h1>Articles</h1>

{% if request.user.is_authenticated %}
  <h3>Hello, {{ user.username }}</h3>
  
  <!-- ë‚´ í”„ë¡œí•„ ë§í¬ -->
  <a href="{% url 'accounts:profile' user.username %}">ë‚´ í”„ë¡œí•„</a>
  <a href="{% url 'accounts:logout' %}">Logout</a>
  <a href="{% url 'accounts:delete' %}">íšŒì›íƒˆí‡´</a>
  <a href="{% url 'accounts:update' %}">íšŒì›ì •ë³´ ìˆ˜ì •</a>
  <a href="{% url 'articles:create' %}">CREATE</a>
{% else %}
  <a href="{% url 'accounts:login' %}">Login</a>
  <a href="{% url 'accounts:signup' %}">Signup</a>
{% endif %}

<hr>

<!-- ê²Œì‹œê¸€ ëª©ë¡ -->
{% for article in articles %}
  <!-- ì‘ì„±ì í”„ë¡œí•„ ë§í¬ -->
  <p>ì‘ì„±ì: 
    <a href="{% url 'accounts:profile' article.user.username %}">
      {{ article.user }}
    </a>
  </p>
  <p>ê¸€ ë²ˆí˜¸: {{ article.pk }}</p>
  <a href="{% url 'articles:detail' article.pk %}">
    <p>ê¸€ ì œëª©: {{ article.title }}</p>
  </a>
  <p>ê¸€ ë‚´ìš©: {{ article.content }}</p>
  
  <!-- ì¢‹ì•„ìš” ë²„íŠ¼ -->
  <form action="{% url 'articles:likes' article.pk %}" method="POST">
    {% csrf_token %}
    {% if request.user in article.like_users.all %}
      <input type="submit" value="ì¢‹ì•„ìš” ì·¨ì†Œ">
    {% else %}
      <input type="submit" value="ì¢‹ì•„ìš”">
    {% endif %}
  </form>
  <hr>
{% endfor %}
```

**íŒ”ë¡œìš° ê´€ê³„ ì¡°íšŒ ì˜ˆì‹œ**
```python
# Django shell
user1 = User.objects.get(username='admin')
user2 = User.objects.get(username='user01')

# user1ì´ user2ë¥¼ íŒ”ë¡œìš°
user1.followings.add(user2)

# user1ì´ íŒ”ë¡œìš°í•˜ëŠ” ì‚¬ëŒë“¤ (ì°¸ì¡°)
user1.followings.all()
# <QuerySet [<User: user01>]>

# user2ë¥¼ íŒ”ë¡œìš°í•˜ëŠ” ì‚¬ëŒë“¤ (ì—­ì°¸ì¡°)
user2.followers.all()
# <QuerySet [<User: admin>]>

# user1ì˜ íŒ”ë¡œì‰ ìˆ˜
user1.followings.count()
# 1

# user2ì˜ íŒ”ë¡œì›Œ ìˆ˜
user2.followers.count()
# 1

# user1ì´ user2ë¥¼ íŒ”ë¡œìš° ì¤‘ì¸ì§€ í™•ì¸
user2 in user1.followings.all()
# True

# ë˜ëŠ” exists() ì‚¬ìš© (ì„±ëŠ¥ ê°œì„ )
user1.followings.filter(pk=user2.pk).exists()
# True

# íŒ”ë¡œìš° ì·¨ì†Œ
user1.followings.remove(user2)

user1.followings.all()
# <QuerySet []>

user2.followers.all()
# <QuerySet []>
```

**dumpdata - ë°ì´í„° ì¶”ì¶œ**
```bash
# ê¸°ë³¸ ë¬¸ë²•
$ python manage.py dumpdata [ì•±ì´ë¦„.ëª¨ë¸ì´ë¦„] [ì˜µì…˜] > ì¶”ì¶œíŒŒì¼ëª….json

# Article ëª¨ë¸ ë°ì´í„° ì¶”ì¶œ
$ python manage.py dumpdata --indent 4 articles.article > articles.json

# Comment ëª¨ë¸ ë°ì´í„° ì¶”ì¶œ
$ python manage.py dumpdata --indent 4 articles.comment > comments.json

# User ëª¨ë¸ ë°ì´í„° ì¶”ì¶œ
$ python manage.py dumpdata --indent 4 accounts.user > users.json

# ì—¬ëŸ¬ ëª¨ë¸ ë™ì‹œ ì¶”ì¶œ
$ python manage.py dumpdata --indent 4 articles > articles_all.json

# ì „ì²´ í”„ë¡œì íŠ¸ ë°ì´í„° ì¶”ì¶œ
$ python manage.py dumpdata --indent 4 > all_data.json

# ì˜µì…˜:
# --indent 4: ë“¤ì—¬ì“°ê¸° 4ì¹¸ (ê°€ë…ì„±)
# --format json: JSON í˜•ì‹ (ê¸°ë³¸ê°’)
# --natural-foreign: Foreign Keyë¥¼ ìì—° í‚¤ë¡œ í‘œí˜„
# --natural-primary: Primary Keyë¥¼ ìì—° í‚¤ë¡œ í‘œí˜„
```

**ìƒì„±ëœ JSON íŒŒì¼ ì˜ˆì‹œ**
```json
// articles.json
[
  {
    "model": "articles.article",
    "pk": 1,
    "fields": {
      "user": 1,
      "title": "First",
      "content": "First Content",
      "created_at": "2024-11-11T10:30:00.123Z",
      "updated_at": "2024-11-11T10:30:00.123Z"
    }
  },
  {
    "model": "articles.article",
    "pk": 2,
    "fields": {
      "user": 1,
      "title": "Second",
      "content": "Second Content",
      "created_at": "2024-11-11T11:00:00.456Z",
      "updated_at": "2024-11-11T11:00:00.456Z"
    }
  }
]
```

**loaddata - ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°**
```bash
# Fixtures íŒŒì¼ ë°°ì¹˜
# articles/fixtures/ ë””ë ‰í† ë¦¬ì— JSON íŒŒì¼ ìœ„ì¹˜

# ë””ë ‰í† ë¦¬ êµ¬ì¡° ì˜ˆì‹œ:
# articles/
#   â”œâ”€â”€ fixtures/
#   â”‚   â”œâ”€â”€ articles.json
#   â”‚   â”œâ”€â”€ comments.json
#   â”‚   â””â”€â”€ users.json
#   â”œâ”€â”€ models.py
#   â””â”€â”€ views.py

# ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
$ rm db.sqlite3
$ python manage.py migrate

# í•œ ë²ˆì— ëª¨ë“  ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° (ê¶Œì¥)
# Djangoê°€ ìë™ìœ¼ë¡œ ì˜ì¡´ì„± ìˆœì„œ ì²˜ë¦¬
$ python manage.py loaddata articles.json users.json comments.json

# ë˜ëŠ” ì˜ì¡´ ê´€ê³„ ìˆœì„œëŒ€ë¡œ ê°œë³„ ì‹¤í–‰
$ python manage.py loaddata users.json
$ python manage.py loaddata articles.json
$ python manage.py loaddata comments.json

# âŒ ì˜ëª»ëœ ìˆœì„œ (ì—ëŸ¬ ë°œìƒ)
$ python manage.py loaddata comments.json  # User, Article ì—†ì–´ì„œ ì—ëŸ¬!

# ì—ëŸ¬ ë©”ì‹œì§€:
# django.db.utils.IntegrityError: Problem installing fixtures: 
# The row in table 'articles_comment' with primary key '1' has an 
# invalid foreign key: articles_comment.user_id contains a value '1' 
# that does not have a corresponding value in accounts_user.id.
```

**Fixtures í´ë” êµ¬ì¡°**
```
ğŸ“ myproject
  â”œâ”€ ğŸ“ accounts
  â”‚   â”œâ”€ ğŸ“ fixtures  # ì—¬ê¸°ì— accounts ê´€ë ¨ fixtures
  â”‚   â”‚   â””â”€ ğŸ“„ users.json
  â”‚   â”œâ”€ ğŸ“„ models.py
  â”‚   â””â”€ ğŸ“„ views.py
  â”œâ”€ ğŸ“ articles
  â”‚   â”œâ”€ ğŸ“ fixtures  # ì—¬ê¸°ì— articles ê´€ë ¨ fixtures
  â”‚   â”‚   â”œâ”€ ğŸ“„ articles.json
  â”‚   â”‚   â””â”€ ğŸ“„ comments.json
  â”‚   â”œâ”€ ğŸ“„ models.py
  â”‚   â””â”€ ğŸ“„ views.py
  â”œâ”€ ğŸ“ myproject
  â”œâ”€ ğŸ“„ db.sqlite3
  â”œâ”€ ğŸ“„ manage.py
  â””â”€ ğŸ“„ requirements.txt
```

**í˜‘ì—… ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ**
```bash
# [ê°œë°œì Aì˜ ì‘ì—…]
# 1. ë°ì´í„° ìƒì„± (ìœ ì €, ê²Œì‹œê¸€, ëŒ“ê¸€)
# 2. dumpdataë¡œ JSON íŒŒì¼ ì¶”ì¶œ
$ python manage.py dumpdata --indent 4 accounts.user > accounts/fixtures/users.json
$ python manage.py dumpdata --indent 4 articles.article > articles/fixtures/articles.json
$ python manage.py dumpdata --indent 4 articles.comment > articles/fixtures/comments.json

# 3. Gitì— ì»¤ë°‹ ë° í‘¸ì‹œ
$ git add .
$ git commit -m "Add initial fixtures"
$ git push origin main

# [ê°œë°œì Bì˜ ì‘ì—…]
# 1. í”„ë¡œì íŠ¸ í´ë¡ 
$ git clone <repository-url>
$ cd myproject

# 2. ê°€ìƒí™˜ê²½ ì„¤ì • ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜
$ python -m venv venv
$ source venv/bin/activate  # Windows: venv\Scripts\activate
$ pip install -r requirements.txt

# 3. ë§ˆì´ê·¸ë ˆì´ì…˜
$ python manage.py migrate

# 4. Fixtures ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
$ python manage.py loaddata users.json articles.json comments.json

# 5. ì„œë²„ ì‹¤í–‰ ë° í™•ì¸
$ python manage.py runserver
# ê°œë°œì Aì™€ ë™ì¼í•œ ë°ì´í„° í™˜ê²½ì—ì„œ ì‘ì—… ê°€ëŠ¥!
```

**Fixtures ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­**
```python
# 1. ë§ˆì´ê·¸ë ˆì´ì…˜ ë¨¼ì € ì™„ë£Œ
$ python manage.py migrate  # loaddata ì „ì— í•„ìˆ˜!

# 2. ì¤‘ë³µ PK ì—ëŸ¬ ë°©ì§€
# ê¸°ì¡´ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì¤‘ë³µ ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥
# í•´ê²° ë°©ë²•:
# - ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” í›„ loaddata
# - ë˜ëŠ” Fixtures íŒŒì¼ì˜ PK ìˆ˜ì •

# 3. ì˜ì¡´ ê´€ê³„ ìˆœì„œ
# User â†’ Article â†’ Comment ìˆœì„œ ì¤€ìˆ˜
# ë˜ëŠ” í•œ ë²ˆì— ì‹¤í–‰í•˜ì—¬ Djangoê°€ ìë™ ì²˜ë¦¬

# 4. ì¸ì½”ë”© ë¬¸ì œ
# --indent 4 ì˜µì…˜ìœ¼ë¡œ UTF-8 ì¸ì½”ë”© ë³´ì¥

# 5. .gitignore í™•ì¸
# Fixtures íŒŒì¼ì€ Gitì— í¬í•¨í•´ì•¼ í•¨
# db.sqlite3ëŠ” ì œì™¸
```

**Fixtures í™œìš© ì‹œë‚˜ë¦¬ì˜¤**
```bash
# 1. ì´ˆê¸° ë°ì´í„° ì„¸íŒ…
# ì›¹ ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ ê¸°ë³¸ ê¶Œí•œ ê·¸ë£¹, ì¹´í…Œê³ ë¦¬ ë“±
$ python manage.py loaddata initial_groups.json
$ python manage.py loaddata product_categories.json

# 2. í…ŒìŠ¤íŠ¸ ìƒ˜í”Œ ë°ì´í„°
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, í†µí•© í…ŒìŠ¤íŠ¸ìš© ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë°ì´í„°
$ python manage.py loaddata test_users.json
$ python manage.py loaddata test_articles.json

# 3. í˜‘ì—… í™˜ê²½ êµ¬ì¶•
# íŒ€ì›ë“¤ì´ ë™ì¼í•œ ì´ˆê¸° ë°ì´í„°ë¡œ ê°œë°œ ì‹œì‘
$ python manage.py loaddata shared_data.json

# 4. í”„ë¡œë•ì…˜ ë°ì´í„° ë°±ì—…
# ì •ê¸°ì ìœ¼ë¡œ dumpdataë¡œ ë°±ì—…
$ python manage.py dumpdata --indent 4 > backup_$(date +%Y%m%d).json
```

# ğŸ› ï¸ ì´ìŠˆ & í•´ê²°
| ğŸ ë¬¸ì œ ìƒí™© | ğŸ” ì›ì¸ | ğŸ’¡ í•´ê²° ë°©ë²• |
|--------------|--------|--------------|
| íŒ”ë¡œìš° ê´€ê³„ ì„¤ì • ì‹œ symmetrical ì†ì„±ì„ ì„¤ì •í•˜ì§€ ì•Šì•„ ì–‘ë°©í–¥ íŒ”ë¡œìš°ê°€ ìë™ìœ¼ë¡œ ë¨ | symmetrical ê¸°ë³¸ê°’ì´ Trueì—¬ì„œ Aê°€ Bë¥¼ íŒ”ë¡œìš°í•˜ë©´ Bë„ ìë™ìœ¼ë¡œ Aë¥¼ íŒ”ë¡œìš° | `symmetrical=False` ì„¤ì •í•˜ì—¬ ë‹¨ë°©í–¥ íŒ”ë¡œìš° êµ¬í˜„ |
| related_name ì—†ì´ ManyToManyField ì‘ì„± ì‹œ ì—­ì°¸ì¡°ê°€ user_setìœ¼ë¡œ ìƒì„±ë˜ì–´ í˜¼ë€ | ê¸°ë³¸ ì—­ì°¸ì¡° ì´ë¦„ì´ ëª…í™•í•˜ì§€ ì•ŠìŒ | `related_name='followers'`ë¡œ ëª…ì‹œì ìœ¼ë¡œ ì—­ì°¸ì¡° ì´ë¦„ ì§€ì • |
| í”„ë¡œí•„ í˜ì´ì§€ì—ì„œ ë³¸ì¸ë„ íŒ”ë¡œìš° ë²„íŠ¼ì´ í‘œì‹œë¨ | ì¡°ê±´ë¬¸ ì—†ì´ ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ë²„íŠ¼ í‘œì‹œ | `{% if request.user != person %}` ì¡°ê±´ë¬¸ìœ¼ë¡œ ë³¸ì¸ í˜ì´ì§€ì—ì„œëŠ” ë²„íŠ¼ ìˆ¨ê¹€ |
| loaddata ì‹œ IntegrityError ë°œìƒ (Foreign Key ì œì•½ ìœ„ë°˜) | ì˜ì¡´ ê´€ê³„ ìˆœì„œë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³  Commentë¥¼ ë¨¼ì € ë¶ˆëŸ¬ì˜´ | User â†’ Article â†’ Comment ìˆœì„œë¡œ loaddata ì‹¤í–‰ ë˜ëŠ” í•œ ë²ˆì— ì‹¤í–‰ |
| dumpdataë¡œ ì¶”ì¶œí•œ JSON íŒŒì¼ì´ í•œ ì¤„ë¡œ ì €ì¥ë˜ì–´ ê°€ë…ì„± ì €í•˜ | --indent ì˜µì…˜ ë¯¸ì‚¬ìš© | `--indent 4` ì˜µì…˜ ì¶”ê°€í•˜ì—¬ ë“¤ì—¬ì“°ê¸° ì ìš© |
| loaddata ì‹œ "No fixture named 'users' found" ì—ëŸ¬ ë°œìƒ | Fixtures íŒŒì¼ì´ ì˜¬ë°”ë¥¸ ê²½ë¡œì— ì—†ìŒ | `app_name/fixtures/` ë””ë ‰í† ë¦¬ì— JSON íŒŒì¼ ë°°ì¹˜ |
| íŒ”ë¡œìš° ì—¬ë¶€ í™•ì¸ ì‹œ ë§¤ë²ˆ QuerySetì„ í‰ê°€í•˜ì—¬ ì„±ëŠ¥ ì €í•˜ | `request.user in person.followers.all()` ë°©ì‹ì€ ì „ì²´ QuerySet ì¡°íšŒ | `person.followers.filter(pk=request.user.pk).exists()` ì‚¬ìš©í•˜ì—¬ ì¡´ì¬ ì—¬ë¶€ë§Œ í™•ì¸ |
| í˜‘ì—… ì‹œ ë‹¤ë¥¸ ê°œë°œìê°€ pull ë°›ì•˜ëŠ”ë° ë°ì´í„°ê°€ ì—†ìŒ | db.sqlite3ëŠ” .gitignoreì— í¬í•¨ë˜ì–´ ê³µìœ ë˜ì§€ ì•ŠìŒ | dumpdataë¡œ Fixtures ìƒì„± í›„ Gitì— í¬í•¨, ë‹¤ë¥¸ ê°œë°œìëŠ” loaddataë¡œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° |
| loaddata ì‹œ ì¤‘ë³µ PK ì—ëŸ¬ ë°œìƒ | ê¸°ì¡´ ë°ì´í„°ë² ì´ìŠ¤ì— ë™ì¼í•œ PKë¥¼ ê°€ì§„ ë°ì´í„°ê°€ ì´ë¯¸ ì¡´ì¬ | ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”(`rm db.sqlite3` â†’ `migrate`) í›„ loaddata ì‹¤í–‰ |