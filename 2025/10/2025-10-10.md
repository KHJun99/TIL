# 2025-10-10 TIL

# âœ… ì˜¤ëŠ˜ í•œ ì¼
- Django Static filesì™€ Media files í•™ìŠµ
- ì •ì  íŒŒì¼ ê²½ë¡œ ì„¤ì • ë° ì œê³µ ë°©ë²• ì‹¤ìŠµ
- ImageFieldë¥¼ í™œìš©í•œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„
- AWS ì¸í”„ë¼ êµ¬ì¡° ì´í•´ (EC2, S3, RDS)
- upload_to ì†ì„±ì„ í™œìš©í•œ ë™ì  ê²½ë¡œ ìƒì„± ë°©ë²• í•™ìŠµ

# ğŸ“š ë°°ìš´ ì 
- **Static files**: ì„œë²„ ì¸¡ì—ì„œ ë³€ê²½ë˜ì§€ ì•Šê³  ê³ ì •ì ìœ¼ë¡œ ì œê³µë˜ëŠ” íŒŒì¼ (CSS, JS, ì´ë¯¸ì§€ ë“±)
- **Media files**: ì‚¬ìš©ìê°€ ì›¹ ì‚¬ì´íŠ¸ë¥¼ í†µí•´ ì§ì ‘ ì—…ë¡œë“œí•˜ëŠ” íŒŒì¼
- **ì›¹ ì„œë²„ì˜ ê¸°ë³¸ ì—­í• **: ìš”ì²­ ë°›ì€ URLì— í•´ë‹¹í•˜ëŠ” ìì›ì„ ì°¾ì•„ ì‘ë‹µí•˜ëŠ” ê²ƒ
- **ì •ì  íŒŒì¼ì˜ í•µì‹¬ ì›ë¦¬**: ì»´í“¨í„°ì— íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” ë¶ˆì¶©ë¶„í•˜ë©°, ì›¹ ì£¼ì†Œ(URL)ê°€ ìˆì–´ì•¼ ì ‘ê·¼ ê°€ëŠ¥
- **ImageFieldì˜ ì €ì¥ ë°©ì‹**: ì´ë¯¸ì§€ íŒŒì¼ ìì²´ëŠ” ì„œë²„ í´ë”ì— ì €ì¥ë˜ê³ , DBì—ëŠ” íŒŒì¼ ê²½ë¡œ(ë¬¸ìì—´)ë§Œ ì €ì¥ë¨

# ğŸ“Œ í•µì‹¬ ê°œë…
- **STATIC_URL**: ì •ì  íŒŒì¼ì˜ 'ì›¹ ì£¼ì†Œ' (ì˜ˆ: '/static/')
- **STATICFILES_DIRS**: ê¸°ë³¸ ê²½ë¡œ ì™¸ì— ì¶”ê°€ì ìœ¼ë¡œ íƒìƒ‰í•  ê²½ë¡œì˜ ëª©ë¡
- **MEDIA_ROOT**: ë¯¸ë””ì–´ íŒŒì¼ì˜ 'ì‹¤ì œ ì°½ê³ ' ì£¼ì†Œ (ì„œë²„ì˜ ì‹¤ì œ ê²½ë¡œ)
- **MEDIA_URL**: ë¯¸ë””ì–´ íŒŒì¼ì˜ 'ì›¹ ì£¼ì†Œ' ë³„ëª… (ì˜ˆ: '/media/')
- **enctype="multipart/form-data"**: íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•´ form íƒœê·¸ì— í•„ìˆ˜ë¡œ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ì†ì„±
- **ImageFieldì˜ .url ì†ì„±**: ì—…ë¡œë“œëœ íŒŒì¼ì˜ ì›¹ ì£¼ì†Œë¥¼ ë°˜í™˜

# ğŸ’¡ ì˜ˆì‹œ ì½”ë“œ

**Static files ê¸°ë³¸ ê²½ë¡œ ì‚¬ìš©**
```html
{% load static %}
<link rel="stylesheet" href="{% static 'stylesheets/style.css' %}">
<img src="{% static 'images/sample-1.png' %}" alt="ìƒ˜í”Œ ì´ë¯¸ì§€">
```

**Static files ì¶”ê°€ ê²½ë¡œ ì„¤ì •**
```python
# settings.py
STATIC_URL = 'static/'
STATICFILES_DIRS = [
    BASE_DIR / 'static',
]
```

**Media files ì„¤ì •**
```python
# settings.py
MEDIA_ROOT = BASE_DIR / 'media'
MEDIA_URL = 'media/'

# urls.py
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ... ê¸°ì¡´ íŒ¨í„´ë“¤
] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

**ImageField ëª¨ë¸ ì •ì˜**
```python
# models.py
class Article(models.Model):
    title = models.CharField(max_length=100)
    image = models.ImageField(blank=True, upload_to='images/')
```

**ì´ë¯¸ì§€ ì—…ë¡œë“œ Form ì²˜ë¦¬**
```html
<!-- create.html -->
<form action="{% url 'articles:create' %}" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">ì‘ì„±</button>
</form>
```
```python
# views.py
def create(request):
    if request.method == 'POST':
        form = ArticleForm(request.POST, request.FILES)
        if form.is_valid():
            article = form.save()
            return redirect('articles:detail', article.pk)
```

**ì—…ë¡œë“œëœ ì´ë¯¸ì§€ ì¶œë ¥**
```html
<!-- detail.html -->
{% if article.image %}
    <img src="{{ article.image.url }}" alt="{{ article.title }}">
{% endif %}
```

**upload_to ë™ì  ê²½ë¡œ ìƒì„±**
```python
# 1. ë‚ ì§œ ê¸°ë°˜ ê²½ë¡œ
image = models.ImageField(upload_to='%Y/%m/%d/')

# 2. í•¨ìˆ˜ ê¸°ë°˜ ê²½ë¡œ
def article_image_path(instance, filename):
    return f'user_{instance.user.id}/{filename}'

image = models.ImageField(upload_to=article_image_path)
```

# ğŸ› ï¸ ì´ìŠˆ & í•´ê²°
| ğŸ ë¬¸ì œ ìƒí™© | ğŸ” ì›ì¸ | ğŸ’¡ í•´ê²° ë°©ë²• |
|--------------|--------|--------------|
| ImageField ì‚¬ìš© ì‹œ migration ì—ëŸ¬ ë°œìƒ | Pillow ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¯¸ì„¤ì¹˜ | `pip install Pillow` ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜ í›„ migrations ì¬ì§„í–‰ |
| ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ íŒŒì¼ì´ ì „ì†¡ë˜ì§€ ì•ŠìŒ | form íƒœê·¸ì— enctype ì†ì„± ëˆ„ë½ | `enctype="multipart/form-data"` ì†ì„± ì¶”ê°€ |
| view í•¨ìˆ˜ì—ì„œ ì—…ë¡œë“œëœ íŒŒì¼ ì²˜ë¦¬ ì‹¤íŒ¨ | request.FILESë¥¼ Formì— ì „ë‹¬í•˜ì§€ ì•ŠìŒ | ModelFormì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ `request.FILES` ì¶”ê°€ (ì˜ˆ: `ArticleForm(request.POST, request.FILES)`) |