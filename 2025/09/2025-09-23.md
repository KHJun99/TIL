# 2025-09-23 TIL

# âœ… ì˜¤ëŠ˜ í•œ ì¼
- Django **Model/ORM**ì˜ ì—­í• ê³¼ êµ¬ì¡° ì •ë¦¬(í”„ë¡œì íŠ¸â€“ì•±â€“URLsâ€“Viewsâ€“Modelsâ€“Templates ì—°ê³„)
- **Model Field**(types/options)ì™€ ì œì•½ ì¡°ê±´(null, blank, default) í•™ìŠµ
- **Migrations** íŒŒì´í”„ë¼ì¸(makemigrations â†’ migrate) ë° ì¶”ê°€ í•„ë“œ ì¼€ì´ìŠ¤ ì‹¤ìŠµ
- **Admin site** ì„¤ì •/ì‚¬ìš©ë²•ê³¼ **SQLite** ì‚¬ìš© ì‹œ ì£¼ì˜ì  ì •ë¦¬

# ğŸ“š ë°°ìš´ ì 
- **Model = DB í…Œì´ë¸”ì˜ íŒŒì´ì¬ ì¶”ìƒí™”**: í´ë˜ìŠ¤(í•„ë“œ) â†” í…Œì´ë¸”(ì»¬ëŸ¼) ì¼ëŒ€ì¼ ë§¤í•‘, ì¸ìŠ¤í„´ìŠ¤ â†” ë ˆì½”ë“œ
- `models.Model`ì„ **ìƒì†**í•˜ë©´ ORM ê¸°ëŠ¥(DDL/DML)ì´ ì œê³µë˜ê³ , `id` ê¸°ë³¸ PKëŠ” ìë™ ìƒì„±
- **Field types**ëŠ” ì €ì¥í•  ë°ì´í„°ì˜ **ì¢…ë¥˜**, **Field options**ëŠ” í•„ë“œì˜ **ë™ì‘/ì œì•½**ì„ ê·œì •
  - `CharField(max_length=...)`ëŠ” ê¸¸ì´ ì œí•œ, `TextField()`ëŠ” ëŒ€ìš©ëŸ‰ í…ìŠ¤íŠ¸(ê¸¸ì´ ì œí•œ ì‹¤ì§ˆì  ì—†ìŒ)
  - ë‚ ì§œ/ì‹œê°„: `DateField / DateTimeField (auto_now, auto_now_add)`
- **null vs blank**
  - `null=True` â†’ DB ì°¨ì›ì—ì„œ NULL í—ˆìš©
  - `blank=True` â†’ í¼/ìœ íš¨ì„± ê²€ì‚¬ ë ˆë²¨ì—ì„œ ë¹ˆê°’ í—ˆìš© (ê´€ë¦¬ì/í¼ ì…ë ¥ê³¼ ê´€ë ¨)
- **Migrations**: ëª¨ë¸ ë³€ê²½ â†’ **ì„¤ê³„ë„ ìƒì„±**(makemigrations) â†’ **DB ë°˜ì˜**(migrate). ê¸°ì¡´ í…Œì´ë¸”ì— **ë¹„NULL í•„ë“œ ì¶”ê°€** ì‹œ ê¸°ë³¸ê°’ ìš”êµ¬ í”„ë¡¬í”„íŠ¸ ë°œìƒ
- **Admin**: `createsuperuser` í›„ `admin.site.register(Model)` í•´ì•¼ ëª©ë¡/CRUD ë…¸ì¶œ
- **SQLite**: íŒŒì¼ ê¸°ë°˜(`db.sqlite3`)ì´ë¯€ë¡œ **.gitignore**ì— ì œì™¸, í™˜ê²½ ì´ë™ì€ `migrations` + `fixtures`/`initial data`ë¡œ ì²˜ë¦¬

# ğŸ“Œ í•µì‹¬ ê°œë…
- **Model í´ë˜ìŠ¤ ì‘ì„±**
  - í•„ë“œëª… = ì»¬ëŸ¼ëª…, `models.<FieldType>(ì˜µì…˜ë“¤)`
  - ì œì•½ ì¡°ê±´ì€ **DB/í¼** ë ˆì´ì–´ë¥¼ êµ¬ë¶„(null vs blank)
- **Migrations íë¦„**
  - ëª¨ë¸ ìˆ˜ì • â†’ `makemigrations`(ì„¤ê³„ë„) â†’ `migrate`(DDL ì‹¤í–‰)
  - ì¶”ê°€ í•„ë“œê°€ **nullable ì•„ë‹˜**ì´ë©´ ê¸°ë³¸ê°’ ì§€ì • ë˜ëŠ” `default=`/`null=True` ì„¤ê³„ í•„ìš”
- **Admin ë“±ë¡**
  - `admin.py`ì—ì„œ ëª¨ë¸ ë“±ë¡í•´ì•¼ í™”ë©´ì— í‘œì‹œ
- **DB ì´ˆê¸°í™”(í•™ìŠµìš©)**: `migrations/` ê°œë³„ íŒŒì¼ + `db.sqlite3` ì‚­ì œ í›„ ì¬ìƒì„±(ì‹¤ë¬´ì—ì„  ì‹ ì¤‘)

# ğŸ’¡ ì˜ˆì‹œ ì½”ë“œ
```python
# articles/models.py
from django.db import models

class Article(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()
    # ìƒì„±/ìˆ˜ì • ì‹œê°
    created_at = models.DateTimeField(auto_now_add=True)  # ìµœì´ˆ ìƒì„± ì‹œ 1íšŒ ê¸°ë¡
    updated_at = models.DateTimeField(auto_now=True)      # ì €ì¥(save)ë  ë•Œë§ˆë‹¤ ê°±ì‹ 

    def __str__(self):
        return self.title
```

```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì´í”„ë¼ì¸
python manage.py makemigrations
python manage.py migrate

# ì¶”ê°€ ëª…ë ¹
python manage.py showmigrations         # ì ìš© ì—¬ë¶€ í™•ì¸
python manage.py sqlmigrate articles 0001  # SQLë¡œ í™•ì¸
```

```python
# admin.py
from django.contrib import admin
from .models import Article

@admin.ModelAdmin.register(Article)  # ë˜ëŠ” admin.site.register(Article)
class ArticleAdmin(admin.ModelAdmin):
    list_display = ("id", "title", "created_at", "updated_at")
    search_fields = ("title", "content")
```

```text
# .gitignore (ë°œì·Œ)
db.sqlite3
venv/
__pycache__/
*.pyc
```

# ğŸ› ï¸ ì´ìŠˆ & í•´ê²°
| ğŸ ë¬¸ì œ ìƒí™© | ğŸ” ì›ì¸ | ğŸ’¡ í•´ê²° ë°©ë²• |
|--------------|--------|--------------|
| IntegrityError: NOT NULL constraint failed | í•„ìˆ˜ í•„ë“œì— ê°’ ì—†ì´ save | `null/blank` ì„¤ê³„ ì¬ê²€í†  ë˜ëŠ” ê°’ ì±„ì›Œ ì €ì¥ |
| You are trying to add a non-nullable field... | ê¸°ì¡´ í…Œì´ë¸”ì— ë¹„NULL ìƒˆ í•„ë“œ ì¶”ê°€ | `default` ì œê³µ or `null=True`ë¡œ ì„¤ê³„ ìˆ˜ì • í›„ ë§ˆì´ê·¸ë ˆì´ì…˜ |
| no such table: app_model | ë§ˆì´ê·¸ë ˆì´ì…˜ ë¯¸ì ìš© | `makemigrations` í›„ `migrate` ì‹¤í–‰ |
| Adminì— ëª¨ë¸ì´ ì•ˆ ë³´ì„ | `admin.site.register` ëˆ„ë½ ë˜ëŠ” ì•± ë¯¸ë“±ë¡ | `admin.py` ë“±ë¡, `INSTALLED_APPS`ì— ì•± ì¶”ê°€ |
| í•„ë“œ ê¸¸ì´/íƒ€ì… ë¶ˆì¼ì¹˜ ì—ëŸ¬ | `max_length` ë¶€ì¡±Â·íƒ€ì… ì„¤ê³„ ì˜¤ë¥˜ | í•„ë“œ íƒ€ì…/ì˜µì…˜ ì¬ì„¤ê³„ â†’ ìƒˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±/ì ìš© |

# ğŸ¯ ë‚´ì¼ í•  ì¼
- ğŸ“š ORM ê¸°ë³¸ ì—°ì‚°(CRUD, `QuerySet` í•„í„°ë§/ì •ë ¬/ìŠ¬ë¼ì´ì‹±) ì •ë¦¬ ë° ì‰˜ ì‹¤ìŠµ
- ğŸ’» Article CRUD ë·°/í…œí”Œë¦¿ ì‘ì„± & URL ë§¤í•‘(ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í¬í•¨)
- ğŸ” ë§ˆì´ê·¸ë ˆì´ì…˜ ë¶„ê¸°/ë¦¬ë„¤ì„Â·ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤ìŠµ, Admin ì»¤ìŠ¤í„°ë§ˆì´ì§•(list_filter, ordering)
