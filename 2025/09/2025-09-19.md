# 2025-09-19 TIL

# âœ… ì˜¤ëŠ˜ í•œ ì¼
- **Django Template System/Language(DTL)** í•µì‹¬ ë¬¸ë²•(ë³€ìˆ˜Â·í•„í„°Â·íƒœê·¸Â·ì£¼ì„) ì •ë¦¬
- **í…œí”Œë¦¿ ìƒì†(base.html â†” child.html)**ê³¼ í´ë” êµ¬ì¡° ì •ë¦¬
- **HTML form â†’ ìš”ì²­/ì‘ë‹µ(GET/POST)**, request ê°ì²´ ì ‘ê·¼ ì‹¤ìŠµ
- **URLs**: URL dispatcher, Variable Routing, `include()`, Naming( `name=` ), **ë„¤ì„ìŠ¤í˜ì´ìŠ¤(`app_name`)**ê¹Œì§€ êµ¬ì„±

# ğŸ“š ë°°ìš´ ì 
- **DTL**ì€ â€œí‘œí˜„â€ì„ ìœ„í•œ ì–¸ì–´ë¡œ, íŒŒì´ì¬ì´ ì•„ë‹ˆë¼ í…œí”Œë¦¿ ì—”ì§„ì—ì„œ ì²˜ë¦¬ëœë‹¤.
- **í…œí”Œë¦¿ ìƒì†**ìœ¼ë¡œ ê³µí†µ ë ˆì´ì•„ì›ƒì„ ê³µìœ í•˜ê³  ë¸”ë¡ë§Œ êµì²´í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±â†‘.
- **form í•µì‹¬**: `action`(ëª©ì ì§€), `method`(ì „ì†¡ ë°©ì‹), `input name`(key) â€” ì„œë²„ëŠ” `request.GET/POST['name']`ë¡œ ì ‘ê·¼.
- **URL ì„¤ê³„**: ì•±ë³„ `urls.py`ë¡œ ë¶„ë¦¬ + `include()` ì‚¬ìš©, `name`ê³¼ `app_name`ìœ¼ë¡œ **ì˜ë¯¸ ê¸°ë°˜ ë§í¬** ê´€ë¦¬.
- **Trailing slash**: DjangoëŠ” ê¸°ë³¸ì ìœ¼ë¡œ URL ëì— `/`ë¥¼ ê°•ì œ(`APPEND_SLASH=True`) â€” SEO/ì¤‘ë³µ URL ì˜ˆë°©.

# ğŸ“Œ í•µì‹¬ ê°œë…
- **DTL Syntax**
  - Variable: `{{ user.username }}`
  - Filters: `{{ text|truncatewords:10 }}`, `{{ date|date:"Y-m-d" }}` (ì²´ì´ë‹ ê°€ëŠ¥)
  - Tags: `{% if %}/{% for %}/{% url %}/{% extends %}/{% block %}`
  - Comments: `{# inline #}`, `{% comment %} ... {% endcomment %}`
- **í…œí”Œë¦¿ ìƒì†**
  - ìƒìœ„ `base.html`ì— ê³µí†µ ë ˆì´ì•„ì›ƒê³¼ `{% block content %}` ì •ì˜ â†’ ìì‹ì´ `{% extends "base.html" %}` í›„ ë¸”ë¡ë§Œ ì¬ì •ì˜
- **Variable Routing**
  - `path("articles/<int:num>/", views.detail, name="detail")` â†’ `views.detail(request, num)`
- **URL ë„¤ì„ìŠ¤í˜ì´ìŠ¤**
  - ì•± `urls.py`ì— `app_name = "articles"` ì„ ì–¸ â†’ í…œí”Œë¦¿ì—ì„œ `{% url 'articles:detail' num %}`

# ğŸ’¡ ì˜ˆì‹œ ì½”ë“œ

```html
<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>{% block title %}My Site{% endblock title %}</title>
</head>
<body>
  <header>
    <a href="{% url 'articles:index' %}">Home</a>
    <nav>{% block nav %}{% endblock nav %}</nav>
  </header>
  <main>
    {% block content %}{% endblock content %}
  </main>
  <footer>Â© {{ now|date:"Y" }}</footer>
</body>
</html>
```

```html
<!-- templates/articles/index.html -->
{% extends "base.html" %}
{% block title %}Articles{% endblock title %}
{% block content %}
  <h1>Articles</h1>
  <p>{{ msg|default:"Hello Django!" }}</p>
  <ul>
    {% for art in articles %}
      <li>
        <a href="{% url 'articles:detail' art.id %}">{{ art.title|truncatewords:5 }}</a>
      </li>
    {% empty %}
      <li>No articles</li>
    {% endfor %}
  </ul>
{% endblock content %}
```

```python
# articles/views.py
from django.shortcuts import render
from django.http import HttpResponse

def index(request):
    ctx = {
        "msg": "DTL & URLs ì—°ìŠµ",
        "articles": [{"id":1,"title":"ì¥ê³  í…œí”Œë¦¿ ì–¸ì–´ ë°°ìš°ê¸°"},
                     {"id":2,"title":"URL ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ includeë¡œ ë¼ìš°íŒ… ì •ë¦¬"}],
    }
    return render(request, "articles/index.html", ctx)

def detail(request, num):
    return HttpResponse(f"Detail page: article #{num}")

# throw â†’ catch (GET ì˜ˆì‹œ)
def throw(request):
    return render(request, "articles/throw.html")

def catch(request):
    message = request.GET.get("message", "")
    return render(request, "articles/catch.html", {"message": message})
```

```html
<!-- templates/articles/throw.html -->
{% extends "base.html" %}
{% block content %}
  <h2>Throw</h2>
  <form action="{% url 'articles:catch' %}" method="get">
    <input type="text" name="message" placeholder="ë©”ì‹œì§€ ì…ë ¥">
    <button type="submit">ë³´ë‚´ê¸°</button>
  </form>
{% endblock content %}
```

```html
<!-- templates/articles/catch.html -->
{% extends "base.html" %}
{% block content %}
  <h2>Catch</h2>
  <p>ì„œë²„ì—ì„œ ë°›ì€ ë©”ì‹œì§€: <strong>{{ message|upper }}</strong></p>
{% endblock content %}
```

```python
# firstpjt/urls.py (í”„ë¡œì íŠ¸ ë£¨íŠ¸)
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('articles/', include('articles.urls')),  # ì•± URL ìœ„ì„
]
```

```python
# articles/urls.py (ì•± ë¼ìš°íŒ… + ë„¤ì„ìŠ¤í˜ì´ìŠ¤)
from django.urls import path
from . import views

app_name = "articles"
urlpatterns = [
    path("", views.index, name="index"),
    path("throw/", views.throw, name="throw"),
    path("catch/", views.catch, name="catch"),
    path("<int:num>/", views.detail, name="detail"),  # Variable Routing
]
```

```python
# settings.py (ì¶”ê°€ í…œí”Œë¦¿ ê²½ë¡œ ì‚¬ìš© ì‹œ)
from pathlib import Path
BASE_DIR = Path(__file__).resolve().parent.parent

TEMPLATES = [
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        "DIRS": [BASE_DIR / "templates"],  # ì „ì—­ templates ë””ë ‰í„°ë¦¬
        "APP_DIRS": True,
        "OPTIONS": {"context_processors": [
            "django.template.context_processors.debug",
            "django.template.context_processors.request",
            "django.contrib.auth.context_processors.auth",
            "django.contrib.messages.context_processors.messages",
        ]},
    },
]

# trailing slash ì •ì±…(ê¸°ë³¸ True)
APPEND_SLASH = True
```

```html
<!-- ì „ì—­ templates/base.html ì„ ì‚¬ìš©í•  ë•Œ extends ê²½ë¡œ -->
{% extends "base.html" %}
```

# ğŸ› ï¸ ì´ìŠˆ & í•´ê²°
| ğŸ ë¬¸ì œ ìƒí™© | ğŸ” ì›ì¸ | ğŸ’¡ í•´ê²° ë°©ë²• |
|--------------|--------|--------------|
| í…œí”Œë¦¿ ê²½ë¡œ ì˜¤ë¥˜(TemplateDoesNotExist) | í´ë” êµ¬ì¡°/íŒŒì¼ëª… ì˜¤íƒ€ | `app/templates/app/...` ë˜ëŠ” ì „ì—­ `templates/` + `TEMPLATES['DIRS']` ì„¤ì • í™•ì¸ |
| URL ë³€ê²½ ì‹œ ë§í¬ ëŠê¹€ | í•˜ë“œì½”ë”©ëœ ê²½ë¡œ(`/articles/index/`) | í…œí”Œë¦¿ì˜ `{% url 'app:name' %}` ì‚¬ìš©, ë·°/ë¦¬ë‹¤ì´ë ‰íŠ¸ë„ `reverse()` í™œìš© |
| Variable Routing íƒ€ì… ì—ëŸ¬ | `<int:...>`ì— ë¬¸ìì—´ ì „ë‹¬ | ì»¨ë²„í„° íƒ€ì… ì ê²€, í•„ìš” ì‹œ `<str:...>` ì‚¬ìš© |
| catchì—ì„œ ê°’ì´ ë¹ˆë¬¸ì | `input name` ë¶ˆì¼ì¹˜ | `name`ê³¼ ì„œë²„ì¸¡ í‚¤ ë™ì¼í•˜ê²Œ, `GET.get("key", default)` |
| ìŠ¬ë˜ì‹œ 404/301 ë°˜ë³µ | trailing slash ì •ì±… ë¯¸ì´í•´ | `APPEND_SLASH` í™•ì¸, URL íŒ¨í„´ ëì— `/` ì¼ê´€ë˜ê²Œ ì‘ì„± |

# ğŸ¯ ë‚´ì¼ í•  ì¼
- ğŸ“š í…œí”Œë¦¿ ìƒì† + `block.super` ì‘ìš©, í…œí”Œë¦¿ í•„í„°/íƒœê·¸(ì»¤ìŠ¤í…€ íƒœê·¸ í¬í•¨) ë” ì—°ìŠµ
- ğŸ’» POST í¼ + CSRF + í¼ ìœ íš¨ì„± ê²€ì¦ìœ¼ë¡œ ê°„ë‹¨ ì…ë ¥ ì²˜ë¦¬ êµ¬í˜„
- ğŸ” `include()` + `namespace`ë¡œ ë‹¤ì¤‘ ì•± ë¼ìš°íŒ… êµ¬ì¡° ë¦¬íŒ©í„°ë§ ë° URL ë¦¬ë²„ìŠ¤ í…ŒìŠ¤íŠ¸
